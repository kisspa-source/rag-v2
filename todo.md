# Local RAG Chatbot ê°œë°œ ì‘ì—… ëª©ë¡

> ì´ ë¬¸ì„œëŠ” `plan.md`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ëœ ë‹¨ê³„ë³„ ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.
> **ì›ì¹™**: ê° ì£¼ìš” ë‹¨ê³„ë§ˆë‹¤ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê³  ê²€ì¦ í›„ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.

---

## Phase 0: í”„ë¡œì íŠ¸ ì´ˆê¸°í™”

### 0.1 ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- [ ] ë£¨íŠ¸ ë””ë ‰í† ë¦¬ `rag-v2/` ìƒì„±
- [ ] `data/` (ë¬¸ì„œ ì €ì¥ì†Œ)
- [ ] `chroma_db/` (Vector DB)
- [ ] `logs/` (ë¡œê·¸ íŒŒì¼)
- [ ] `eval/` (í‰ê°€ ë°ì´í„°)
- [ ] `.gitignore` ìƒì„±

### 0.2 í™˜ê²½ ì„¤ì •
- [ ] Python 3.10+ ì„¤ì¹˜ í™•ì¸
- [ ] ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
  ```bash
  python -m venv venv
  venv\Scripts\activate  # Windows
  ```
- [ ] pip ì—…ê·¸ë ˆì´ë“œ: `python -m pip install --upgrade pip`

### 0.3 Ollama ì„¤ì¹˜
- [ ] Ollama ì„¤ì¹˜: https://ollama.com/
- [ ] Ollama ì„œë¹„ìŠ¤ ì‹¤í–‰ í™•ì¸
- [ ] ëª¨ë¸ ë‹¤ìš´ë¡œë“œ:
  ```bash
  ollama pull qwen2:7b
  ollama pull llama3.1:8b
  ```

### âœ… TEST 0: í™˜ê²½ ì„¤ì • ê²€ì¦
- [ ] Python ë²„ì „ í™•ì¸: `python --version` (3.10+)
- [ ] Ollama ì„œë¹„ìŠ¤ í™•ì¸: `http://localhost:11434` ì ‘ì†
- [ ] ëª¨ë¸ ì„¤ì¹˜ í™•ì¸: `ollama list`
- [ ] ê°„ë‹¨í•œ Ollama í˜¸ì¶œ í…ŒìŠ¤íŠ¸:
  ```python
  from langchain_community.llms import Ollama
  llm = Ollama(model="qwen2:7b")
  print(llm.invoke("ì•ˆë…•í•˜ì„¸ìš”"))
  ```

---

## Phase 1: MVP íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ê¸°ë³¸ êµ¬ì¡°

### 1.1 requirements.txt ì‘ì„± (MVP í•„ìˆ˜ë§Œ)
- [ ] `requirements.txt` ìƒì„±
  - `langchain`
  - `langchain-community`
  - `streamlit`
  - `chromadb`
  - `sentence-transformers`
  - `pypdf`
  - `rank_bm25`
  - `markdown`
- [ ] íŒ¨í‚¤ì§€ ì„¤ì¹˜: `pip install -r requirements.txt`

### 1.2 config.yaml í…œí”Œë¦¿ ìƒì„±
- [ ] `config.yaml` íŒŒì¼ ìƒì„±
  - Chunk size, overlap ê¸°ë³¸ê°’
  - LLM ì„¤ì • (temperature, max_tokens)
  - ê²€ìƒ‰ íŒŒë¼ë¯¸í„° (top_k, context_count)
  - HNSW íŒŒë¼ë¯¸í„° (M, ef_construction, ef)

### âœ… TEST 1: íŒ¨í‚¤ì§€ ì„¤ì¹˜ ê²€ì¦
- [ ] ëª¨ë“  íŒ¨í‚¤ì§€ ì •ìƒ import í™•ì¸:
  ```python
  import langchain
  import streamlit
  import chromadb
  from sentence_transformers import SentenceTransformer
  import pypdf
  from rank_bm25 import BM25Okapi
  print("âœ… ëª¨ë“  MVP íŒ¨í‚¤ì§€ ì •ìƒ ì„¤ì¹˜")
  ```
- [ ] `config.yaml` ë¡œë“œ í…ŒìŠ¤íŠ¸

---

## Phase 2: RAG ì—”ì§„ ëª¨ë“ˆ êµ¬í˜„

### 2.1 loaders.py - ë¬¸ì„œ ë¡œë” (MVP: PDF, MD, TXTë§Œ)
- [ ] `loaders.py` íŒŒì¼ ìƒì„±
- [ ] `PDFLoader` êµ¬í˜„ (pypdf ì‚¬ìš©)
- [ ] `MarkdownLoader` êµ¬í˜„
- [ ] `TextLoader` êµ¬í˜„
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ì¶”ê°€:
  - íŒŒì¼ ì—´ê¸° ì‹¤íŒ¨
  - ì¸ì½”ë”© ì˜¤ë¥˜ (UTF-8 ì¬ì‹œë„)
  - ë¹ˆ íŒŒì¼ ì²˜ë¦¬

### âœ… TEST 2.1: ë¬¸ì„œ ë¡œë” ê²€ì¦
- [ ] ìƒ˜í”Œ PDF ë¡œë“œ í…ŒìŠ¤íŠ¸ (í•œê¸€/ì˜ë¬¸)
- [ ] Markdown íŒŒì¼ ë¡œë“œ í…ŒìŠ¤íŠ¸
- [ ] Text íŒŒì¼ ë¡œë“œ í…ŒìŠ¤íŠ¸
- [ ] ì†ìƒëœ íŒŒì¼ ì—ëŸ¬ í•¸ë“¤ë§ í™•ì¸
- [ ] ë¡œë“œëœ í…ìŠ¤íŠ¸ ê¸¸ì´ ë° ë‚´ìš© ì¶œë ¥ í™•ì¸

### 2.2 í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬ (loaders.py ë‚´ë¶€ í•¨ìˆ˜)
- [ ] ê³µë°± ì •ê·œí™” í•¨ìˆ˜ êµ¬í˜„
- [ ] í•œê¸€ ìëª¨ ë³µêµ¬ (`unicodedata.normalize('NFC')`)
- [ ] í—¤ë”/í‘¸í„° ì œê±° ë¡œì§ (ì„ íƒì‚¬í•­, ë‚˜ì¤‘ì—)
- [ ] ì¤‘ë³µ ì œê±° í•¨ìˆ˜ (Deduplication)

### âœ… TEST 2.2: ì „ì²˜ë¦¬ ê²€ì¦
- [ ] ì „ì²˜ë¦¬ ì „/í›„ í…ìŠ¤íŠ¸ ë¹„êµ
- [ ] ê³µë°± ì •ê·œí™” ë™ì‘ í™•ì¸
- [ ] í•œê¸€ ê¹¨ì§ ë³µêµ¬ í™•ì¸

### 2.3 indexer.py - ì¸ë±ì‹± ë° ì²­í‚¹
- [ ] `indexer.py` íŒŒì¼ ìƒì„±
- [ ] **Chunking í•¨ìˆ˜** êµ¬í˜„:
  - ê³ ì • í¬ê¸°: 600~800 í† í°
  - Overlap: 100
  - RecursiveCharacterTextSplitter ì‚¬ìš©
- [ ] **Context Enrichment**:
  - ê° ì²­í¬ì— ë¬¸ì„œ ì œëª© ë©”íƒ€ë°ì´í„° ì¶”ê°€
  - í˜ì´ì§€ ë²ˆí˜¸ ì €ì¥
- [ ] **íŒŒì¼ í•´ì‹œ ê³„ì‚°** í•¨ìˆ˜
- [ ] **Chroma ì¸ë±ìŠ¤ ìƒì„±** í•¨ìˆ˜:
  - HNSW íŒŒë¼ë¯¸í„° ì ìš© (M=16, ef_construction=100, ef=30)
  - Collection ìƒì„±/ë¡œë“œ
- [ ] **Incremental Indexing** ë¡œì§:
  - íŒŒì¼ í•´ì‹œ ë¹„êµ
  - ë³€ê²½ ì‹œì—ë§Œ ì¬ì¸ë±ì‹±

### âœ… TEST 2.3: ì¸ë±ì‹± ê²€ì¦
- [ ] ìƒ˜í”Œ ë¬¸ì„œ ì²­í‚¹ í…ŒìŠ¤íŠ¸:
  ```python
  chunks = create_chunks(text)
  print(f"ì´ ì²­í¬ ìˆ˜: {len(chunks)}")
  for i, chunk in enumerate(chunks[:3]):
      print(f"Chunk {i}: {len(chunk.page_content)} chars")
      print(f"Metadata: {chunk.metadata}")
  ```
- [ ] Chunk í¬ê¸° ë¶„í¬ í™•ì¸ (600~800 ë²”ìœ„)
- [ ] Overlap ë™ì‘ í™•ì¸
- [ ] ë©”íƒ€ë°ì´í„° ì •ìƒ ì¶”ê°€ í™•ì¸
- [ ] ChromaDB ì‚½ì… í…ŒìŠ¤íŠ¸
- [ ] ë™ì¼ íŒŒì¼ ì¬ì—…ë¡œë“œ ì‹œ Incremental Indexing ë™ì‘ í™•ì¸

### 2.4 retriever.py - ê²€ìƒ‰ê¸° êµ¬í˜„
- [ ] `retriever.py` íŒŒì¼ ìƒì„±
- [ ] **BM25Retriever** êµ¬í˜„
- [ ] **ChromaRetriever** êµ¬í˜„ (Vector ê²€ìƒ‰)
- [ ] **EnsembleRetriever** êµ¬í˜„ (BM25 + Vector ë³‘í•©)
- [ ] **RRF (Reciprocal Rank Fusion)** í•¨ìˆ˜ (Advanced, ì„ íƒ)
- [ ] **Context Filtering** í•¨ìˆ˜ êµ¬í˜„
- [ ] **Top-K ê²°ê³¼ ì¶”ì¶œ** í•¨ìˆ˜

### âœ… TEST 2.4: ê²€ìƒ‰ê¸° ê²€ì¦
- [ ] BM25 ê²€ìƒ‰ ë‹¨ë… í…ŒìŠ¤íŠ¸:
  ```python
  query = "íŠ¹ì • í‚¤ì›Œë“œ"
  bm25_results = bm25_retriever.get_relevant_documents(query, k=5)
  print(f"BM25 ê²°ê³¼ ìˆ˜: {len(bm25_results)}")
  ```
- [ ] Vector ê²€ìƒ‰ ë‹¨ë… í…ŒìŠ¤íŠ¸
- [ ] Hybrid Search (Ensemble) í…ŒìŠ¤íŠ¸
- [ ] ê²€ìƒ‰ ê²°ê³¼ ìˆœìœ„ í™•ì¸
- [ ] ê²€ìƒ‰ ì†ë„ ì¸¡ì • (< 1ì´ˆ ëª©í‘œ)

### 2.5 llm_client.py - LLM í´ë¼ì´ì–¸íŠ¸
- [ ] `llm_client.py` íŒŒì¼ ìƒì„±
- [ ] **Ollama ì´ˆê¸°í™”** í•¨ìˆ˜
- [ ] **System Prompt ë¡œë“œ** í•¨ìˆ˜ (config.yaml)
- [ ] **Prompt Template** êµ¬í˜„:
  - Contextual Instructions
  - Hallucination Prevention
  - í•œêµ­ì–´ ë‹µë³€ í”„ë¡¬í”„íŠ¸
- [ ] **RAG Chain** êµ¬ì„± (LCEL)
- [ ] **Timeout ë° ì¬ì‹œë„** ë¡œì§ ì¶”ê°€

### âœ… TEST 2.5: LLM í´ë¼ì´ì–¸íŠ¸ ê²€ì¦
- [ ] Ollama ì—°ê²° í…ŒìŠ¤íŠ¸
- [ ] System Prompt ë¡œë“œ í™•ì¸
- [ ] ê°„ë‹¨í•œ í”„ë¡¬í”„íŠ¸ í˜¸ì¶œ í…ŒìŠ¤íŠ¸
- [ ] Timeout ë™ì‘ í™•ì¸
- [ ] ì‘ë‹µ ì‹œê°„ ì¸¡ì • (2~4ì´ˆ ëª©í‘œ)

### 2.6 rag_engine.py - í†µí•© RAG ì—”ì§„
- [ ] `rag_engine.py` íŒŒì¼ ìƒì„±
- [ ] ìœ„ ëª¨ë“ˆë“¤ import ë° ì¡°í•©
- [ ] **RAGEngine í´ë˜ìŠ¤** êµ¬í˜„:
  - `load_documents(file_paths)`
  - `index_documents(documents)`
  - `search(query, top_k=3)`
  - `generate_answer(query, context)`
  - `run(query)` - E2E ì‹¤í–‰
  - **Safe Mode** êµ¬í˜„:
    - `config.safe_mode=True`ì¼ ë•Œ ê³ ê¸‰ ê¸°ëŠ¥(Rerank, Expansion) ë¹„í™œì„±í™”
- [ ] **ë¡œê¹… ì‹œìŠ¤í…œ** êµ¬í˜„:
  - ì§ˆë¬¸/ë‹µë³€/ì‹œê°„ ê¸°ë¡
  - ìœ ì‚¬ë„ ì ìˆ˜, BM25 ì ìˆ˜ ê¸°ë¡
  - `logs/queries.jsonl` ì €ì¥

### 2.7 CLI ì¸í„°í˜ì´ìŠ¤ (Debug Tool)
- [ ] `cli.py` ë˜ëŠ” `rag_engine.py`ì˜ `__main__` êµ¬í˜„
- [ ] ì»¤ë§¨ë“œë¼ì¸ ì¸ì ì²˜ë¦¬ (`argparse`):
  - `python -m rag_engine.cli "ì§ˆë¬¸" --doc sample.pdf`
- [ ] Streamlit ì—†ì´ ì—”ì§„ ë¡œì§ë§Œ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ìš©ë„

### âœ… TEST 2.6: E2E RAG íŒŒì´í”„ë¼ì¸ & CLI ê²€ì¦
- [ ] CLIë¡œ ì§ˆë¬¸ ìˆ˜í–‰ í…ŒìŠ¤íŠ¸:
  ```bash
  python -m rag_engine.cli "í…ŒìŠ¤íŠ¸ ì§ˆë¬¸"
  ```
- [ ] ìƒ˜í”Œ PDF ë¡œë“œ â†’ ì¸ë±ì‹± â†’ ì§ˆë¬¸ â†’ ë‹µë³€ ìƒì„± í…ŒìŠ¤íŠ¸:
  ```python
  engine = RAGEngine(config)
  engine.load_documents(["sample.pdf"])
  engine.index_documents()
  answer = engine.run("ë¬¸ì„œì˜ ì£¼ìš” ë‚´ìš©ì€?")
  print(answer)
  ```
- [ ] ë‹µë³€ì— ì¶œì²˜ í¬í•¨ í™•ì¸
- [ ] Hallucination ë°©ì§€ í™•ì¸ ("ëª¨ë¥´ê² ë‹¤" ë‹µë³€)
- [ ] í•œêµ­ì–´ ë‹µë³€ í’ˆì§ˆ í™•ì¸
- [ ] ì „ì²´ ì‘ë‹µ ì‹œê°„ ì¸¡ì • (< 5ì´ˆ ëª©í‘œ)
- [ ] ë¡œê·¸ íŒŒì¼ ìƒì„± í™•ì¸

---

## Phase 3: Streamlit UI êµ¬í˜„ (app.py)

### 3.1 ê¸°ë³¸ ì•± êµ¬ì¡°
- [ ] `app.py` íŒŒì¼ ìƒì„±
- [ ] Streamlit í˜ì´ì§€ ì„¤ì • (`st.set_page_config`)
- [ ] **Session State ì´ˆê¸°í™”**:
  - `messages` (ì±„íŒ… íˆìŠ¤í† ë¦¬)
  - `indexed_files` (ì¸ë±ì‹±ëœ íŒŒì¼ ëª©ë¡)
  - `rag_engine` (RAG ì—”ì§„ ì¸ìŠ¤í„´ìŠ¤)
- [ ] **ìºì‹± ì„¤ì •**:
  - `@st.cache_resource`ë¡œ ëª¨ë¸/ì—”ì§„ ìºì‹±

### âœ… TEST 3.1: ê¸°ë³¸ ì•± ì‹¤í–‰ í™•ì¸
- [ ] `streamlit run app.py` ì‹¤í–‰
- [ ] í˜ì´ì§€ ë¡œë“œ í™•ì¸
- [ ] Session State ì´ˆê¸°í™” í™•ì¸
- [ ] ìºì‹± ë™ì‘ í™•ì¸ (ì¬ë¡œë“œ ì‹œ ìºì‹œ ì‚¬ìš©)

### 3.2 ì‚¬ì´ë“œë°” - ëª¨ë¸ ì„ íƒ ë° íŒŒì¼ ì—…ë¡œë“œ
- [ ] **ëª¨ë¸ ì„ íƒ** ë“œë¡­ë‹¤ìš´ êµ¬í˜„
  - `qwen2:7b`, `llama3.1:8b` ì„ íƒ
- [ ] **íŒŒì¼ ì—…ë¡œë”** êµ¬í˜„ (`st.file_uploader`)
  - ì§€ì› í˜•ì‹: PDF, MD, TXT (MVP)
- [ ] **ë¹„ë™ê¸° ì¸ë±ì‹±** êµ¬í˜„:
  - `threading` + `st.status` ì‚¬ìš©
  - ì—…ë¡œë“œ ì¤‘ ë²„íŠ¼ ë¹„í™œì„±í™”
  - ì§„í–‰ë¥  í‘œì‹œ
- [ ] **ì¸ë±ì‹± ìƒíƒœ í‘œì‹œ**
- [ ] **ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ**

### âœ… TEST 3.2: íŒŒì¼ ì—…ë¡œë“œ ê²€ì¦
- [ ] PDF íŒŒì¼ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸
- [ ] ì§„í–‰ë¥  í‘œì‹œ ì •ìƒ ë™ì‘ í™•ì¸
- [ ] ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ UI ë½ ì—†ëŠ”ì§€ í™•ì¸
- [ ] ì¸ë±ì‹± ì™„ë£Œ ë©”ì‹œì§€ í™•ì¸
- [ ] íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ í‘œì‹œ í™•ì¸
- [ ] ë™ì‹œ ì—…ë¡œë“œ ë°©ì§€ í™•ì¸ (ë²„íŠ¼ ë¹„í™œì„±í™”)

### 3.3 ë©”ì¸ í™”ë©´ - ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
- [ ] **ì±„íŒ… ë©”ì‹œì§€ ë Œë”ë§** (`st.chat_message`)
- [ ] **ì§ˆë¬¸ ì…ë ¥ì°½** (`st.chat_input`)
- [ ] **ë‹µë³€ ìƒì„±** ë¡œì§
- [ ] **ìŠ¤íŠ¸ë¦¬ë° ì¶œë ¥** (ì„ íƒì‚¬í•­)
- [ ] **ì¶œì²˜ í‘œì‹œ**:
  - í˜•ì‹: `íŒŒì¼ëª… p.í˜ì´ì§€` (ì˜ˆ: `sample.pdf p.11, p.12`)
  - ë™ì¼ í˜ì´ì§€ ë³‘í•©
- [ ] **í‚¤ì›Œë“œ í•˜ì´ë¼ì´íŠ¸** (ì„ íƒì‚¬í•­)

### âœ… TEST 3.3: ì±„íŒ… ê¸°ëŠ¥ ê²€ì¦
- [ ] ì§ˆë¬¸ ì…ë ¥ â†’ ë‹µë³€ ìƒì„± í™•ì¸
- [ ] ì±„íŒ… íˆìŠ¤í† ë¦¬ í‘œì‹œ í™•ì¸
- [ ] ì¶œì²˜ í˜•ì‹ í™•ì¸
- [ ] ë™ì¼ í˜ì´ì§€ ë³‘í•© í™•ì¸
- [ ] ëŒ€í™” ê¸°ë¡ ì„¸ì…˜ ìœ ì§€ í™•ì¸

### 3.4 ê´€ë¦¬ì í˜ì´ì§€ (Settings)
- [ ] **íƒ­ ë˜ëŠ” ì‚¬ì´ë“œë°” ì„¹ì…˜** ìƒì„±
- [ ] **RAG ì„¤ì •** ìŠ¬ë¼ì´ë”:
  - Chunk Size (400~1000)
  - Overlap (50~200)
  - Top-K (1~10)
  - Context Count (1~5)
- [ ] **LLM ì„¤ì •**:
  - Temperature (0.0~1.0)
  - Max Tokens (100~1000)
- [ ] **System Prompt í¸ì§‘ê¸°** (`st.text_area`)
- [ ] **ì„¤ì • ì €ì¥/ë¡œë“œ** (`config.yaml`)
- [ ] **íŒŒì¼ ê´€ë¦¬**:
  - ì¸ë±ì‹±ëœ íŒŒì¼ ëª©ë¡ í‘œì‹œ
  - íŒŒì¼ ì‚­ì œ ë²„íŠ¼ (Vector DBì—ì„œ ì œê±°)

### âœ… TEST 3.4: ê´€ë¦¬ì ê¸°ëŠ¥ ê²€ì¦
- [ ] íŒŒë¼ë¯¸í„° ë³€ê²½ í›„ ì €ì¥ í™•ì¸
- [ ] `config.yaml` íŒŒì¼ ì—…ë°ì´íŠ¸ í™•ì¸
- [ ] System Prompt ìˆ˜ì • ë° ì ìš© í™•ì¸
- [ ] Temperature ë³€ê²½ íš¨ê³¼ í™•ì¸
- [ ] íŒŒì¼ ëª©ë¡ í‘œì‹œ í™•ì¸
- [ ] íŒŒì¼ ì‚­ì œ ë™ì‘ í™•ì¸

### 3.5 UX ê°•í™” ê¸°ëŠ¥
- [ ] **ìƒ˜í”Œ ì§ˆë¬¸ ìë™ ì¶”ì²œ** (ì—…ë¡œë“œ í›„)
  - ë¬¸ì„œ ì œëª©/ëª©ì°¨ ê¸°ë°˜ ì§ˆë¬¸ ìƒì„±
- [ ] **ëŒ€í™” ê¸°ë¡ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°** (JSON)
- [ ] **ëŒ€í™” ë‚´ë³´ë‚´ê¸°** (CSV/TXT)

### âœ… TEST 3.5: UX ê¸°ëŠ¥ ê²€ì¦
- [ ] íŒŒì¼ ì—…ë¡œë“œ í›„ ìƒ˜í”Œ ì§ˆë¬¸ í‘œì‹œ í™•ì¸
- [ ] ìƒ˜í”Œ ì§ˆë¬¸ í´ë¦­ ì‹œ ìë™ ì…ë ¥ í™•ì¸
- [ ] ëŒ€í™” ê¸°ë¡ ì €ì¥ í™•ì¸
- [ ] ëŒ€í™” ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ í™•ì¸

---

## Phase 4: ë³´ì•ˆ ë° ë™ì‹œì„± ê´€ë¦¬

### 4.1 ë³´ì•ˆ ì„¤ì •
- [ ] **ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸** êµ¬í˜„:
  - SHA-256 í•´ì‹œ + salt ì €ì¥ (`config.yaml`)
  - ë¡œê·¸ì¸ í™”ë©´ êµ¬í˜„
  - ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ëŠ” `.env` ë˜ëŠ” OS keyring ì‚¬ìš©
- [ ] **ë¡œê·¸ ë³´ì•ˆ**:
  - `logs/` í´ë” ê¶Œí•œ í™•ì¸
  - í´ë¼ìš°ë“œ ë™ê¸°í™” ê²½ë¡œ ê²½ê³  ë©”ì‹œì§€
- [ ] **ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹**:
  - ë¡œê·¸ì— ê°œì¸ì •ë³´ í¬í•¨ ì‹œ ë§ˆìŠ¤í‚¹

### 4.2 ë™ì‹œì„± ê´€ë¦¬
- [ ] **ì—…ë¡œë“œ ì¤‘ ë²„íŠ¼ ë¹„í™œì„±í™”**
- [ ] **Chroma collection ë™ì‹œ ì ‘ê·¼ ë°©ì§€**:
  - Lock ë˜ëŠ” Queue ì‚¬ìš©
- [ ] **ë‹¤ì¤‘ ì‚¬ìš©ì ê²½ê³  ë©”ì‹œì§€** ì¶”ê°€:
  - "ì´ ë²„ì „ì€ ë‹¨ì¼ ì‚¬ìš©ì í™˜ê²½ ê¸°ì¤€ì…ë‹ˆë‹¤" ê²½ê³ 

### âœ… TEST 4: ë³´ì•ˆ ë° ë™ì‹œì„± ê²€ì¦
- [ ] ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
- [ ] ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ ì €ì¥ í™•ì¸
- [ ] ë¡œê·¸ íŒŒì¼ ê¶Œí•œ í™•ì¸
- [ ] ë™ì‹œ ì—…ë¡œë“œ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- [ ] Race condition ë°œìƒí•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸

---

## Phase 5: ì„±ëŠ¥ ìµœì í™” ë° ëª¨ë‹ˆí„°ë§

### 5.1 ë©”ëª¨ë¦¬ ìµœì í™”
- [ ] **ëª¨ë¸ ìºì‹±** í™•ì¸ (`@st.cache_resource`)
- [ ] **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§** ì½”ë“œ ì¶”ê°€ (ì„ íƒì‚¬í•­)
- [ ] **Garbage Collection** ëª…ì‹œì  í˜¸ì¶œ (ëŒ€ìš©ëŸ‰ íŒŒì¼ ì²˜ë¦¬ í›„)

### 5.2 ì„±ëŠ¥ í”„ë¦¬ì…‹ êµ¬í˜„
- [ ] **í™˜ê²½ë³„ ì„¤ì • ì¶”ê°€** (`config.yaml`):
  - **Preset 8GB (ì €ì‚¬ì–‘)**:
    - Rerank: OFF
    - Context Count: 2
    - Chunk Size: 600
  - **Preset 16GB (ê¸°ë³¸)**:
    - Rerank: OFF (MVP) / ON (Advanced)
    - Context Count: 3
    - Chunk Size: 800
  - **Preset 32GB+ (ê³ ì‚¬ì–‘)**:
    - Rerank: ON
    - Context Count: 5
    - Query Expansion: ON
- [ ] **í”„ë¦¬ì…‹ ìë™ ì ìš©** ë¡œì§ (ë©”ëª¨ë¦¬ ê°ì§€ ë˜ëŠ” ìˆ˜ë™ ì„ íƒ)

### âœ… TEST 5: ì„±ëŠ¥ ê²€ì¦
- [ ] **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¸¡ì •** (Task Manager):
  - LLM ë¡œë“œ: ~5-6GB
  - Embedding ë¡œë“œ: +1.5-2GB
  - ChromaDB: +0.5-1GB
  - **ì´í•©: 13GB ì´í•˜ í™•ì¸**
- [ ] **ì‘ë‹µ ì‹œê°„ ì¸¡ì •**:
  - ê²€ìƒ‰: < 1ì´ˆ
  - LLM ìƒì„±: 2-4ì´ˆ
  - **ì „ì²´: < 5ì´ˆ**
- [ ] **8GB í™˜ê²½ í…ŒìŠ¤íŠ¸** (ê°€ëŠ¥í•œ ê²½ìš°):
  - Rerank OFF
  - Context 2ê°œ
  - ì •ìƒ ë™ì‘ í™•ì¸

---

## Phase 6: ê²€ì¦ ë° í‰ê°€ ì‹œìŠ¤í…œ

### 6.1 í‰ê°€ ë°ì´í„° ì„¸íŠ¸ ìƒì„±
- [ ] `eval/qa_pairs.jsonl` íŒŒì¼ ìƒì„±
- [ ] í…ŒìŠ¤íŠ¸ ì§ˆë¬¸-ë‹µë³€ ìŒ ì‘ì„± (ìµœì†Œ 10ê°œ):
  ```json
  {"question": "...", "expected_keywords": ["í‚¤ì›Œë“œ1", "í‚¤ì›Œë“œ2"]}
  ```

### 6.2 ìë™ í‰ê°€ ìŠ¤í¬ë¦½íŠ¸
- [ ] `evaluate.py` íŒŒì¼ ìƒì„±
- [ ] **í‰ê°€ ë¡œì§**:
  - ê° ì§ˆë¬¸ì— ëŒ€í•´ ë‹µë³€ ìƒì„±
  - `expected_keywords` í¬í•¨ ì—¬ë¶€ ì²´í¬
  - Hit Rate ê³„ì‚°
- [ ] **ê²°ê³¼ ì €ì¥** (`eval/results.json`)

### âœ… TEST 6: í‰ê°€ ì‹œìŠ¤í…œ ê²€ì¦
- [ ] í‰ê°€ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰:
  ```bash
  python evaluate.py
  ```
- [ ] Hit Rate í™•ì¸ (ëª©í‘œ: 80% ì´ìƒ)
- [ ] Rerank ON/OFF ë¹„êµ
- [ ] Query Expansion íš¨ê³¼ ì¸¡ì •
- [ ] ê²°ê³¼ ë¦¬í¬íŠ¸ ìƒì„± í™•ì¸

---

## Phase 7: Advanced ê¸°ëŠ¥ (ì„ íƒì  êµ¬í˜„)

### 7.1 Office ë¬¸ì„œ ì§€ì› (2ë‹¨ê³„)
- [ ] `requirements.txt`ì— Office íŒ¨í‚¤ì§€ ì¶”ê°€:
  - `openpyxl`
  - `python-docx`
  - `python-pptx`
- [ ] `loaders.py`ì— Office Loader ì¶”ê°€
- [ ] í…ŒìŠ¤íŠ¸: Word, Excel, PowerPoint íŒŒì¼ ë¡œë“œ

### 7.2 OCR ì§€ì› (3ë‹¨ê³„)
- [ ] `requirements.txt`ì— OCR íŒ¨í‚¤ì§€ ì¶”ê°€:
  - `pytesseract`
  - `pillow`
- [ ] OCR Fallback ë¡œì§ êµ¬í˜„
- [ ] í…ŒìŠ¤íŠ¸: ì´ë¯¸ì§€ PDF OCR ì²˜ë¦¬

### 7.3 ê³ ê¸‰ ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] **Query Expansion** êµ¬í˜„ (ëª…ì‚¬ ì¤‘ì‹¬)
- [ ] **Query Rewriting** (LLM ê¸°ë°˜)
- [ ] **Rerank** êµ¬í˜„ (`BAAI/bge-reranker-v2-m3`)
- [ ] **RRF (Reciprocal Rank Fusion)** í™œì„±í™”

### âœ… TEST 7: Advanced ê¸°ëŠ¥ ê²€ì¦
- [ ] Office ë¬¸ì„œ ë¡œë“œ/ê²€ìƒ‰ í…ŒìŠ¤íŠ¸
- [ ] OCR ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] Query Expansion íš¨ê³¼ í™•ì¸
- [ ] Rerank ì „/í›„ ê²°ê³¼ ë¹„êµ
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸ (15GB ì´í•˜)

---

## Phase 8: í†µí•© í…ŒìŠ¤íŠ¸ ë° Edge Case

### âœ… TEST 8.1: ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
- [ ] **ì‹œë‚˜ë¦¬ì˜¤ 1**: PDF ì—…ë¡œë“œ â†’ ì¸ë±ì‹± â†’ ì§ˆë¬¸ â†’ ë‹µë³€ â†’ ì¶œì²˜ í™•ì¸
- [ ] **ì‹œë‚˜ë¦¬ì˜¤ 2**: ì—¬ëŸ¬ íŒŒì¼ ì—…ë¡œë“œ â†’ ë³µí•© ì§ˆë¬¸ â†’ í¬ë¡œìŠ¤ ë¬¸ì„œ ë‹µë³€
- [ ] **ì‹œë‚˜ë¦¬ì˜¤ 3**: íŒŒì¼ ìˆ˜ì • â†’ ì¬ì—…ë¡œë“œ â†’ Incremental Indexing í™•ì¸
- [ ] **ì‹œë‚˜ë¦¬ì˜¤ 4**: ì„¤ì • ë³€ê²½ â†’ ë‹µë³€ í’ˆì§ˆ ë³€í™” í™•ì¸
- [ ] **ì‹œë‚˜ë¦¬ì˜¤ 5**: Safe Mode â†’ ë² ì´ìŠ¤ë¼ì¸ ì„±ëŠ¥ í™•ì¸

### âœ… TEST 8.2: Edge Case í…ŒìŠ¤íŠ¸
- [ ] **ë¹ˆ PDF** ì—…ë¡œë“œ
- [ ] **ëŒ€ìš©ëŸ‰ PDF** (500í˜ì´ì§€+)
- [ ] **ì†ìƒëœ íŒŒì¼**
- [ ] **íŠ¹ìˆ˜ë¬¸ì í¬í•¨ íŒŒì¼ëª…**
- [ ] **OCR í•„ìš”í•œ ì´ë¯¸ì§€ PDF**
- [ ] **Ollama ì—°ê²° ëŠê¹€** ì‹œë®¬ë ˆì´ì…˜
- [ ] **ë©”ëª¨ë¦¬ ë¶€ì¡±** ìƒí™© (ëŒ€ìš©ëŸ‰ íŒŒì¼)
- [ ] **ë™ì‹œ ë‹¤ì¤‘ ì—…ë¡œë“œ** ì‹œë„

### âœ… TEST 8.3: ë³´ì•ˆ ë° ì•ˆì •ì„±
- [ ] ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ brute-force ë°©ì§€
- [ ] SQL Injection ë“± ë³´ì•ˆ ì·¨ì•½ì  í™•ì¸
- [ ] ì—ëŸ¬ ë°œìƒ ì‹œ Graceful Degradation
- [ ] ë¡œê·¸ íŒŒì¼ ë¯¼ê°ì •ë³´ í™•ì¸

---

## Phase 9: ë°°í¬ ì¤€ë¹„ ë° ë¬¸ì„œí™”

### 9.1 ìµœì¢… ì •ë¦¬
- [ ] **README.md** ì‘ì„±:
  - í”„ë¡œì íŠ¸ ì†Œê°œ
  - ì„¤ì¹˜ ë°©ë²•
  - ì‚¬ìš© ë°©ë²•
  - **ì—…ë°ì´íŠ¸ ì „ëµ** (ì¸ë±ìŠ¤ í˜¸í™˜ì„± ë“±)
  - ë¬¸ì œ í•´ê²° ê°€ì´ë“œ
- [ ] **requirements.txt** ìµœì¢… ì •ë¦¬ (ë²„ì „ ê³ ì •)
- [ ] **config.yaml** ê¸°ë³¸ê°’ ìµœì í™”
- [ ] **ë¶ˆí•„ìš”í•œ íŒŒì¼ ì œê±°**

### 9.2 ë°±ì—… ë° ë³µêµ¬ í…ŒìŠ¤íŠ¸
- [ ] `chroma_db/` í´ë” ë°±ì—… í…ŒìŠ¤íŠ¸
- [ ] ë°±ì—… ë³µêµ¬ í…ŒìŠ¤íŠ¸
- [ ] ì¸ë±ìŠ¤ ì¬ìƒì„± í…ŒìŠ¤íŠ¸

### 9.3 ì‚¬ìš©ì ìˆ˜ìš© í…ŒìŠ¤íŠ¸
- [ ] ë² íƒ€ í…ŒìŠ¤í„° 3ëª… ì´ìƒ ëª¨ì§‘
- [ ] ì‹¤ì œ ì—…ë¬´ ë¬¸ì„œë¡œ í…ŒìŠ¤íŠ¸
- [ ] í”¼ë“œë°± ìˆ˜ì§‘ ë° ê°œì„ 
- [ ] ë²„ê·¸ ë¦¬í¬íŠ¸ ìˆ˜ì§‘ ë° ìˆ˜ì •

### âœ… TEST 9: ë°°í¬ ì¤€ë¹„ ê²€ì¦
- [ ] README ë”°ë¼ ì„¤ì¹˜ í…ŒìŠ¤íŠ¸ (ê¹¨ë—í•œ í™˜ê²½)
- [ ] ë°±ì—…/ë³µêµ¬ ë™ì‘ í™•ì¸
- [ ] ë² íƒ€ í…ŒìŠ¤í„° í”¼ë“œë°± ê¸ì •ì 
- [ ] ì•Œë ¤ì§„ ë²„ê·¸ ëª¨ë‘ ìˆ˜ì •

---

## ğŸ“Š ìµœì¢… ì„±ê³µ ê¸°ì¤€ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] âœ… **ëª¨ë“  TEST í¬ì¸íŠ¸ í†µê³¼** (TEST 0 ~ TEST 9)
- [ ] âœ… **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: 13GB ì´í•˜ (16GB í™˜ê²½)
- [ ] âœ… **í‰ê·  ì‘ë‹µ ì‹œê°„**: 5ì´ˆ ì´í•˜
- [ ] âœ… **ê²€ìƒ‰ ì •í™•ë„**: Hit Rate 80% ì´ìƒ
- [ ] âœ… **UI ë°˜ì‘ì„±**: ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ ë½ ì—†ìŒ
- [ ] âœ… **ì—ëŸ¬ í•¸ë“¤ë§**: Graceful Degradation
- [ ] âœ… **ë¡œê¹… ì‹œìŠ¤í…œ**: ì •ìƒ ë™ì‘ ë° ë³´ì•ˆ
- [ ] âœ… **ì‚¬ìš©ì í”¼ë“œë°±**: ê¸ì •ì  í‰ê°€
- [ ] âœ… **ë¬¸ì„œí™”**: README ì™„ì„±

---

## ğŸ¯ ê°œë°œ ê°€ì´ë“œë¼ì¸

1. **ë‹¨ê³„ë³„ ì§„í–‰**: Phase ìˆœì„œëŒ€ë¡œ ì§„í–‰í•˜ë©°, ê° TEST í¬ì¸íŠ¸ í†µê³¼ í›„ ë‹¤ìŒ ë‹¨ê³„ë¡œ
2. **Git Commit**: ê° TEST í†µê³¼ ì‹œ ì»¤ë°‹ (ë¡¤ë°± ìš©ì´)
3. **ë¬¸ì œ ì¦‰ì‹œ í•´ê²°**: ë‹¤ìŒ ë‹¨ê³„ë¡œ ë¯¸ë£¨ì§€ ì•Šê¸°
4. **ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§**: Task Managerë¡œ ì‹¤ì‹œê°„ í™•ì¸
5. **ë¡œê·¸ í™œìš©**: `logs/queries.jsonl` ë¶„ì„í•˜ì—¬ ë””ë²„ê¹…
6. **í”„ë¦¬ì…‹ í™œìš©**: í™˜ê²½ì— ë§ëŠ” ì„±ëŠ¥ í”„ë¦¬ì…‹ ì‚¬ìš©
7. **ë³´ì•ˆ ìš°ì„ **: ë¹„ë°€ë²ˆí˜¸, ë¡œê·¸ ë¯¼ê°ì •ë³´ í•­ìƒ í™•ì¸

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„ ìš°ì„ ìˆœìœ„

**í˜„ì¬ ì§„í–‰í•´ì•¼ í•  ìˆœì„œ**:
1. Phase 0 (í™˜ê²½ ì„¤ì •) â†’ TEST 0
2. Phase 1 (MVP íŒ¨í‚¤ì§€) â†’ TEST 1
3. Phase 2 (RAG ì—”ì§„) â†’ TEST 2.1~2.6
4. Phase 3 (Streamlit UI) â†’ TEST 3.1~3.5
5. Phase 4 (ë³´ì•ˆ) â†’ TEST 4
6. Phase 5 (ì„±ëŠ¥) â†’ TEST 5
7. Phase 6 (í‰ê°€) â†’ TEST 6
8. Phase 7 (Advanced, ì„ íƒ) â†’ TEST 7
9. Phase 8 (í†µí•© í…ŒìŠ¤íŠ¸) â†’ TEST 8.1~8.3
10. Phase 9 (ë°°í¬) â†’ TEST 9

**MVP ì™„ë£Œ ê¸°ì¤€**: Phase 0~6 ì™„ë£Œ + ëª¨ë“  TEST í†µê³¼
**Advanced ì™„ë£Œ ê¸°ì¤€**: Phase 7 ì¶”ê°€ + TEST 7 í†µê³¼
**Production Ready**: Phase 9 ì™„ë£Œ + ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸ í†µê³¼
